<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>VLife • Hybrid VR MVP</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <script src="https://aframe.io/releases/1.4.1/aframe.min.js"></script>
  <style>
    body { margin:0; background:#000; }
    .hud-badge{
      position: fixed; left: 18px; top: 18px;
      padding: 12px 18px; border-radius: 18px;
      background: rgba(0,0,0,.55);
      color: #e6f4ff; font: 600 16px/1.1 ui-sans-serif,system-ui,Segoe UI,Roboto,Helvetica,Arial;
      letter-spacing:.2px; backdrop-filter: blur(6px);
    }
    .brand{
      position: fixed; right: 18px; top: 18px;
      padding: 8px 14px; border-radius: 14px;
      background: radial-gradient(120% 120% at 0% 0%,#222 0,#000 55%);
      color:#ffe66d; font: 800 18px/1.1 ui-sans-serif,system-ui,Segoe UI,Roboto,Helvetica,Arial;
      box-shadow: 0 6px 24px rgba(0,0,0,.35);
    }
    .tip{
      position:fixed; left: 18px; right: 18px; bottom: 18px;
      color:#fff; font: 500 17px/1.35 ui-sans-serif,system-ui,Segoe UI,Roboto,Helvetica,Arial;
      background: linear-gradient(180deg, rgba(0,0,0,.35), rgba(0,0,0,.65));
      border-radius:16px; padding:14px 18px; backdrop-filter: blur(6px);
      text-shadow: 0 1px 2px rgba(0,0,0,.6);
    }
  </style>
</head>
<body>

<div class="hud-badge">Hybrid VR MVP · 360° / HDR</div>
<div class="brand">VLIFE</div>
<div class="tip">Tip: look at the <b>Skins</b> orb to change backgrounds. Gaze at gold orbs to open previews.</div>

<a-scene renderer="antialias:true; physicallyCorrectLights:true; colorManagement:true; toneMapping:ACESFilmic; exposure:1.05" background="color: #000">
  <!-- Camera + reticle (gaze fuse) -->
  <a-entity id="rig" position="0 1.6 0">
    <a-entity id="camera" camera look-controls wasd-controls="enabled:false">
      <a-entity cursor="fuse: true; fuseTimeout: 900"
                raycaster="objects: .clickable; interval: 80"
                position="0 0 -0.01"
                geometry="primitive: ring; radiusInner: 0.008; radiusOuter: 0.014"
                material="color: #fff; shader: flat; opacity: 0.95"></a-entity>
    </a-entity>
  </a-entity>

  <!-- 360 Sky -->
  <a-assets>
    <img id="bg-park" src="assets/Park360.jpg">
    <img id="bg-forest" src="assets/Forrest360.jpg">
    <img id="bg-future" src="assets/Futurecity360.jpg">
    <img id="bg-club" src="assets/Neonnightclub.jpg">
    <img id="bg-monastery" src="assets/floating_sky_monastery_upscaled_8k.jpg">
  </a-assets>

  <a-sky id="sky" src="#bg-park" rotation="0 -90 0"></a-sky>

  <!-- Front Panel (raised title/subtitle + spaced rows) -->
  <a-entity id="panel" position="0 1.55 -2.25">
    <!-- Panel plate -->
    <a-plane width="1.62" height="0.98" color="#0b0f12"
             material="shader: standard; roughness:0.9; metalness:0; opacity:0.92"
             geometry="primitive: plane; width:1.62; height:0.98"
             shadow="cast:false; receive:false"></a-plane>

    <!-- Title -->
    <a-entity text="value: Choose Background; color: #ff8a1f; align: center; width: 2.4"
              position="0 0.36 0.01"></a-entity>

    <!-- Subtitle (updates dynamically) -->
    <a-entity id="subtitle"
              text="value: Using 360 image: Park Steps 360; color: #5BFF85; align: center; width: 2.6"
              position="0 0.22 0.01"></a-entity>

    <!-- Row 1 Buttons -->
    <a-entity id="row1" position="0 0.04 0.01">
      <a-plane class="clickable" width="0.68" height="0.14" color="#1a232b" position="-0.45 0 0"
               material="shader: standard; roughness:0.8; metalness:0">
        <a-entity text="value: Park Steps 360; align:center; width: 2.2; color:#e5f1ff" position="0 0 0.01"></a-entity>
        <a-entity change-sky="id:#bg-park; label:Park Steps 360"></a-entity>
      </a-plane>
      <a-plane class="clickable" width="0.68" height="0.14" color="#1a232b" position="0.45 0 0"
               material="shader: standard; roughness:0.8; metalness:0">
        <a-entity text="value: Forest 360; align:center; width: 2.2; color:#e5f1ff" position="0 0 0.01"></a-entity>
        <a-entity change-sky="id:#bg-forest; label:Forest 360"></a-entity>
      </a-plane>
    </a-entity>

    <!-- Row 2 Buttons -->
    <a-entity id="row2" position="0 -0.16 0.01">
      <a-plane class="clickable" width="0.68" height="0.14" color="#1a232b" position="-0.45 0 0"
               material="shader: standard; roughness:0.8; metalness:0">
        <a-entity text="value: Future City 360; align:center; width: 2.2; color:#e5f1ff" position="0 0 0.01"></a-entity>
        <a-entity change-sky="id:#bg-future; label:Future City 360"></a-entity>
      </a-plane>
      <a-plane class="clickable" width="0.68" height="0.14" color="#1a232b" position="0.45 0 0"
               material="shader: standard; roughness:0.8; metalness:0">
        <a-entity text="value: Neon Nightclub 360; align:center; width: 2.2; color:#e5f1ff" position="0 0 0.01"></a-entity>
        <a-entity change-sky="id:#bg-club; label:Neon Nightclub 360"></a-entity>
      </a-plane>
    </a-entity>

    <!-- Row 3 Button (single wide) -->
    <a-entity id="row3" position="0 -0.36 0.01">
      <a-plane class="clickable" width="1.4" height="0.14" color="#1a232b"
               material="shader: standard; roughness:0.8; metalness:0">
        <a-entity text="value: Floating Sky Monastery 8K; align:center; width: 3; color:#e5f1ff" position="0 0 0.01"></a-entity>
        <a-entity change-sky="id:#bg-monastery; label:Floating Sky Monastery 8K"></a-entity>
      </a-plane>
    </a-entity>
  </a-entity>

  <!-- GOLD ORBS (evenly spaced, brighter glow) -->
  <a-entity id="orb-ring"></a-entity>

  <!-- Helpers -->
  <script>
    // Change-sky component: switches sky + subtitle on click/gaze
    AFRAME.registerComponent('change-sky', {
      schema: { id: {type:'selector'}, label: {type:'string'} },
      init: function(){
        const el = this.el.parentEl; // plane
        const sky = document.querySelector('#sky');
        const subtitle = document.querySelector('#subtitle');
        el.addEventListener('click', () => {
          if (!this.data.id) return;
          sky.setAttribute('src', '#' + this.data.id.id);
          subtitle.setAttribute('text', 'value: Using 360 image: ' + this.data.label);
        });
      }
    });

    // Build 6 preview orbs in a ring
    const ORBS = [
      { title:'Skins', action:'open-panel' },
      { title:'YouTube VR Channel', url:'https://www.youtube.com/vr' },
      { title:'360Cities', url:'https://www.360cities.net/' },
      { title:'Meta Quest TV', url:'https://www.meta.com/quest/experiences/' },
      { title:'Help', url:'https://support.google.com/webvr' },
      { title:'About', url:'https://chrisburley01.github.io' }
    ];

    const ring = document.querySelector('#orb-ring');
    const radius = 4.6;          // ← pushed further out
    const y = 1.1;               // ← slightly lower
    const orbSize = 0.24;        // sphere radius
    const haloSize = 0.44;       // halo ring outer
    const emissive = '#f7d24b';

    function makeOrb(angleDeg, label, url, action){
      const a = angleDeg * Math.PI/180;
      const x = Math.cos(a) * radius;
      const z = Math.sin(a) * radius;

      // container that always faces the camera a bit
      const group = document.createElement('a-entity');
      group.setAttribute('position', `${x} ${y} ${z}`);
      group.setAttribute('rotation', `0 ${-angleDeg+90} 0`);

      // halo
      const halo = document.createElement('a-ring');
      halo.setAttribute('radius-inner', haloSize*0.58);
      halo.setAttribute('radius-outer', haloSize);
      halo.setAttribute('rotation', '-90 0 0');
      halo.setAttribute('material', 'color: #f1c94f; opacity: 0.35; side: double; transparent: true');
      halo.setAttribute('position', `0 0 ${-orbSize-0.01}`);
      group.appendChild(halo);

      // sphere
      const sphere = document.createElement('a-sphere');
      sphere.setAttribute('radius', orbSize);
      sphere.setAttribute('class', 'clickable');
      sphere.setAttribute('material',
        `color:#ffd84d; metalness:0.15; roughness:0.3; emissive:${emissive}; emissiveIntensity:1.8`);
      sphere.addEventListener('click', () => {
        if(action === 'open-panel'){
          // recentre panel quickly so it’s always visible
          const cam = document.querySelector('#camera').object3D;
          const forward = new THREE.Vector3();
          cam.getWorldDirection(forward);
          forward.y = 0; forward.normalize().multiplyScalar(2.25);
          const pos = cam.getWorldPosition(new THREE.Vector3()).add(forward);
          document.querySelector('#panel').setAttribute('position', `${pos.x} 1.55 ${pos.z}`);
          document.querySelector('#panel').setAttribute('rotation',
            `0 ${THREE.MathUtils.radToDeg(Math.atan2(-forward.x, -forward.z))} 0`);
          return;
        }
        if(url){ window.open(url, '_blank'); }
      });
      group.appendChild(sphere);

      // label plate
      const plate = document.createElement('a-plane');
      plate.setAttribute('width', 1.15);
      plate.setAttribute('height', 0.16);
      plate.setAttribute('position', '0 0.34 0');
      plate.setAttribute('material', 'color:#2a2f36; opacity:0.85; shader:standard; roughness:0.85');
      const txt = document.createElement('a-entity');
      txt.setAttribute('text', `value:${label}; align:center; width: 2.6; color:#e9f2ff`);
      txt.setAttribute('position', '0 0 0.01');
      plate.appendChild(txt);
      group.appendChild(plate);

      ring.appendChild(group);
    }

    // Even spacing
    const step = 360 / ORBS.length;
    ORBS.forEach((o, i) => makeOrb(i*step, o.title, o.url, o.action));

    // Ensure panel always starts centred on load
    AFRAME.scenes[0].addEventListener('loaded', () => {
      const cam3 = document.querySelector('#camera').object3D;
      const dir = new THREE.Vector3();
      cam3.getWorldDirection(dir);
      dir.y = 0; dir.normalize().multiplyScalar(2.25);
      const pos = cam3.getWorldPosition(new THREE.Vector3()).add(dir);
      const panel = document.querySelector('#panel');
      panel.setAttribute('position', `${pos.x} 1.55 ${pos.z}`);
      panel.setAttribute('rotation', `0 ${THREE.MathUtils.radToDeg(Math.atan2(-dir.x, -dir.z))} 0`);
    });
  </script>
</a-scene>
</body>
</html>